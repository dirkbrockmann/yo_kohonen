(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('/*! tailwindcss v4.1.4 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-font-weight:initial}}}@layer theme{:root,:host{--tw-font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--tw-spacing:.25rem;--tw-container-5xl:64rem;--tw-text-2xl:1.5rem;--tw-text-2xl--line-height:calc(2/1.5);--tw-text-3xl:1.875rem;--tw-text-3xl--line-height: 1.2 ;--tw-text-5xl:3rem;--tw-text-5xl--line-height:1;--tw-font-weight-light:300}}@layer base,components;@layer utilities{.tw\\:m-8{margin:calc(var(--tw-spacing)*8)}.tw\\:grid{display:grid}.tw\\:max-w-5xl{max-width:var(--tw-container-5xl)}.tw\\:grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.tw\\:p-0{padding:calc(var(--tw-spacing)*0)}.tw\\:px-1{padding-inline:calc(var(--tw-spacing)*1)}.tw\\:px-10{padding-inline:calc(var(--tw-spacing)*10)}.tw\\:font-sans{font-family:var(--tw-font-sans)}.tw\\:text-2xl{font-size:var(--tw-text-2xl);line-height:var(--tw-leading,var(--tw-text-2xl--line-height))}.tw\\:text-3xl{font-size:var(--tw-text-3xl);line-height:var(--tw-leading,var(--tw-text-3xl--line-height))}.tw\\:text-5xl{font-size:var(--tw-text-5xl);line-height:var(--tw-leading,var(--tw-text-5xl--line-height))}.tw\\:font-light{--tw-font-weight:var(--tw-font-weight-light);font-weight:var(--tw-font-weight-light)}@media (min-width:40rem){.tw\\:sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.tw\\:sm\\:gap-4{gap:calc(var(--tw-spacing)*4)}.tw\\:sm\\:p-0{padding:calc(var(--tw-spacing)*0)}}.debug-grid-16{background-image:linear-gradient(90deg,#0000ff1a 1px,#0000 1px),linear-gradient(#0000ff1a 1px,#0000 1px);background-repeat:repeat;background-size:6.25% 6.25%,6.25% 6.25%}}.explorable *,.explorable :before,.explorable :after{box-sizing:border-box}@property --tw-font-weight{syntax:"*";inherits:false}._widget_18g36_1{stroke:#969696;stroke-width:1px;cursor:pointer;pointer-events:all;stroke-opacity:1;fill-opacity:1;fill:#ccc;font-size:16px}._widget_18g36_1 ._title_18g36_12{font-size:20px;fill:#000;stroke:none;text-anchor:middle}._widget_18g36_1 ._label_18g36_19{fill:#000;stroke:none}._widget_18g36_1 ._lit_18g36_24{fill:#eee}._button_18g36_29>._symbol_18g36_29,._radio_18g36_29>._radiobutton_18g36_29>._symbol_18g36_29{fill:#fff;fill-rule:nonzero;pointer-events:none}._widget_18g36_1 ._symbol_18g36_29._selected_18g36_35,._toggle_18g36_35._selected_18g36_35,._widget_18g36_1 ._symbol_18g36_29._selected_18g36_35._lit_18g36_24{fill:#000}._widget_18g36_1 ._symbol_18g36_29._lit_18g36_24{fill:#bbb}._slider_18g36_44>._track_18g36_44,._toggle_18g36_35>._track_18g36_44{pointer-events:none}._slider_18g36_44>._track_overlay_18g36_48,._toggle_18g36_35>._track_overlay_18g36_48{pointer-events:all;cursor:pointer;fill:transparent;stroke:transparent}._slider_18g36_44>._handle_18g36_55,._toggle_18g36_35>._handle_18g36_55{fill:#fff}._neuron_1czyw_1{fill:#fff;stroke:#000;stroke-width:.5px}._synapse_1czyw_7{fill:none;stroke:#000;stroke-width:.5px}._boundary_1czyw_13{stroke:#8b0000;stroke-width:2px;fill:none}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(E,mt){typeof exports=="object"&&typeof module<"u"?mt(exports):typeof define=="function"&&define.amd?define(["exports"],mt):(E=typeof globalThis<"u"?globalThis:E||self,mt(E.yo_kohonen={}))})(this,function(E){"use strict";const mt={display_type:"svg",debug:!1,controls_border:"",display_border:"1px solid black",debug_lattice:"debug-grid-16",controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},display_margin:5,controls_size:{width:480,height:480},display_class:" tw:p-0",controls_class:"tw:p-0",container_class:"tw:font-sans tw:font-light tw:grid tw:grid-cols-1 tw:sm:grid-cols-2 tw:sm:gap-4 tw:px-1 tw:sm:p-0 tw:m-8"};function Wt(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Vi(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Le(t){let n,e,r;t.length!==2?(n=Wt,e=(s,u)=>Wt(t(s),u),r=(s,u)=>t(s)-u):(n=t===Wt||t===Vi?t:Zi,e=t,r=t);function i(s,u,l=0,f=s.length){if(l<f){if(n(u,u)!==0)return f;do{const c=l+f>>>1;e(s[c],u)<0?l=c+1:f=c}while(l<f)}return l}function o(s,u,l=0,f=s.length){if(l<f){if(n(u,u)!==0)return f;do{const c=l+f>>>1;e(s[c],u)<=0?l=c+1:f=c}while(l<f)}return l}function a(s,u,l=0,f=s.length){const c=i(s,u,l,f-1);return c>l&&r(s[c-1],u)>-r(s[c],u)?c-1:c}return{left:i,center:a,right:o}}function Zi(){return 0}function Wi(t){return t===null?NaN:+t}const Ji=Le(Wt).right;Le(Wi).center;const Qi=Math.sqrt(50),ji=Math.sqrt(10),to=Math.sqrt(2);function Jt(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Qi?10:o>=ji?5:o>=to?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(n*l),s/l<t&&++s,u/l>n&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(n/l),s*l<t&&++s,u*l>n&&--u),u<s&&.5<=e&&e<2?Jt(t,n,e*2):[s,u,l]}function no(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,o,a]=r?Jt(n,t,e):Jt(t,n,e);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)u[l]=(o-l)/-a;else for(let l=0;l<s;++l)u[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(i+l)/-a;else for(let l=0;l<s;++l)u[l]=(i+l)*a;return u}function Fn(t,n,e){return n=+n,t=+t,e=+e,Jt(t,n,e)[2]}function eo(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?Fn(n,t,e):Fn(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Qt(t,n){let e;for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);return e}function ro(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(i);++r<i;)o[r]=t+r*e;return o}var io={value:()=>{}};function Ln(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new jt(e)}function jt(t){this._=t}function oo(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}jt.prototype=Ln.prototype={constructor:jt,on:function(t,n){var e=this._,r=oo(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=ao(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=De(e[i],t.name,n);else if(n==null)for(i in e)e[i]=De(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new jt(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function ao(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function De(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=io,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var Dn="http://www.w3.org/1999/xhtml";const He={svg:"http://www.w3.org/2000/svg",xhtml:Dn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),He.hasOwnProperty(n)?{space:He[n],local:t}:t}function so(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Dn&&n.documentElement.namespaceURI===Dn?n.createElement(t):n.createElementNS(e,t)}}function uo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qe(t){var n=tn(t);return(n.local?uo:so)(n)}function lo(){}function Hn(t){return t==null?lo:function(){return this.querySelector(t)}}function fo(t){typeof t!="function"&&(t=Hn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),u,l,f=0;f<a;++f)(u=o[f])&&(l=t.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new k(r,this._parents)}function co(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ho(){return[]}function Be(t){return t==null?ho:function(){return this.querySelectorAll(t)}}function po(t){return function(){return co(t.apply(this,arguments))}}function go(t){typeof t=="function"?t=po(t):t=Be(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),i.push(u));return new k(r,i)}function Xe(t){return function(){return this.matches(t)}}function Ge(t){return function(n){return n.matches(t)}}var yo=Array.prototype.find;function _o(t){return function(){return yo.call(this.children,t)}}function mo(){return this.firstElementChild}function vo(t){return this.select(t==null?mo:_o(typeof t=="function"?t:Ge(t)))}var wo=Array.prototype.filter;function bo(){return Array.from(this.children)}function xo(t){return function(){return wo.call(this.children,t)}}function Mo(t){return this.selectAll(t==null?bo:xo(typeof t=="function"?t:Ge(t)))}function $o(t){typeof t!="function"&&(t=Xe(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new k(r,this._parents)}function Ue(t){return new Array(t.length)}function Ao(){return new k(this._enter||this._groups.map(Ue),this._parents)}function nn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}nn.prototype={constructor:nn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function To(t){return function(){return t}}function So(t,n,e,r,i,o){for(var a=0,s,u=n.length,l=o.length;a<l;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new nn(t,o[a]);for(;a<u;++a)(s=n[a])&&(i[a]=s)}function Po(t,n,e,r,i,o,a){var s,u,l=new Map,f=n.length,c=o.length,h=new Array(f),g;for(s=0;s<f;++s)(u=n[s])&&(h[s]=g=a.call(u,u.__data__,s,n)+"",l.has(g)?i[s]=u:l.set(g,u));for(s=0;s<c;++s)g=a.call(t,o[s],s,o)+"",(u=l.get(g))?(r[s]=u,u.__data__=o[s],l.delete(g)):e[s]=new nn(t,o[s]);for(s=0;s<f;++s)(u=n[s])&&l.get(h[s])===u&&(i[s]=u)}function Eo(t){return t.__data__}function zo(t,n){if(!arguments.length)return Array.from(this,Eo);var e=n?Po:So,r=this._parents,i=this._groups;typeof t!="function"&&(t=To(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var f=r[l],c=i[l],h=c.length,g=No(t.call(f,f&&f.__data__,l,r)),d=g.length,p=s[l]=new Array(d),b=a[l]=new Array(d),_=u[l]=new Array(h);e(f,c,p,b,_,g,n);for(var M=0,$=0,y,v;M<d;++M)if(y=p[M]){for(M>=$&&($=M+1);!(v=b[$])&&++$<d;);y._next=v||null}}return a=new k(a,r),a._enter=s,a._exit=u,a}function No(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Oo(){return new k(this._exit||this._groups.map(Ue),this._parents)}function Io(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function ko(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=e[u],f=r[u],c=l.length,h=s[u]=new Array(c),g,d=0;d<c;++d)(g=l[d]||f[d])&&(h[d]=g);for(;u<i;++u)s[u]=e[u];return new k(s,this._parents)}function Co(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ro(t){t||(t=Fo);function n(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,u=i[o]=new Array(s),l,f=0;f<s;++f)(l=a[f])&&(u[f]=l);u.sort(n)}return new k(i,this._parents).order()}function Fo(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Lo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Do(){return Array.from(this)}function Ho(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function qo(){let t=0;for(const n of this)++t;return t}function Bo(){return!this.node()}function Xo(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Go(t){return function(){this.removeAttribute(t)}}function Uo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yo(t,n){return function(){this.setAttribute(t,n)}}function Ko(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Vo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Zo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Wo(t,n){var e=tn(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Uo:Go:typeof n=="function"?e.local?Zo:Vo:e.local?Ko:Yo)(e,n))}function Ye(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jo(t){return function(){this.style.removeProperty(t)}}function Qo(t,n,e){return function(){this.style.setProperty(t,n,e)}}function jo(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function ta(t,n,e){return arguments.length>1?this.each((n==null?Jo:typeof n=="function"?jo:Qo)(t,n,e??"")):vt(this.node(),t)}function vt(t,n){return t.style.getPropertyValue(n)||Ye(t).getComputedStyle(t,null).getPropertyValue(n)}function na(t){return function(){delete this[t]}}function ea(t,n){return function(){this[t]=n}}function ra(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function ia(t,n){return arguments.length>1?this.each((n==null?na:typeof n=="function"?ra:ea)(t,n)):this.node()[t]}function Ke(t){return t.trim().split(/^|\s+/)}function qn(t){return t.classList||new Ve(t)}function Ve(t){this._node=t,this._names=Ke(t.getAttribute("class")||"")}Ve.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ze(t,n){for(var e=qn(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function We(t,n){for(var e=qn(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function oa(t){return function(){Ze(this,t)}}function aa(t){return function(){We(this,t)}}function sa(t,n){return function(){(n.apply(this,arguments)?Ze:We)(this,t)}}function ua(t,n){var e=Ke(t+"");if(arguments.length<2){for(var r=qn(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?sa:n?oa:aa)(e,n))}function la(){this.textContent=""}function fa(t){return function(){this.textContent=t}}function ca(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function ha(t){return arguments.length?this.each(t==null?la:(typeof t=="function"?ca:fa)(t)):this.node().textContent}function da(){this.innerHTML=""}function pa(t){return function(){this.innerHTML=t}}function ga(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function ya(t){return arguments.length?this.each(t==null?da:(typeof t=="function"?ga:pa)(t)):this.node().innerHTML}function _a(){this.nextSibling&&this.parentNode.appendChild(this)}function ma(){return this.each(_a)}function va(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wa(){return this.each(va)}function ba(t){var n=typeof t=="function"?t:qe(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function xa(){return null}function Ma(t,n){var e=typeof t=="function"?t:qe(t),r=n==null?xa:typeof n=="function"?n:Hn(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function $a(){var t=this.parentNode;t&&t.removeChild(this)}function Aa(){return this.each($a)}function Ta(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Sa(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Pa(t){return this.select(t?Sa:Ta)}function Ea(t){return arguments.length?this.property("__data__",t):this.node().__data__}function za(t){return function(n){t.call(this,n,this.__data__)}}function Na(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Oa(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Ia(t,n,e){return function(){var r=this.__on,i,o=za(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function ka(t,n,e){var r=Na(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(i=0,f=s[u];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=n?Ia:Oa,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function Je(t,n,e){var r=Ye(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Ca(t,n){return function(){return Je(this,t,n)}}function Ra(t,n){return function(){return Je(this,t,n.apply(this,arguments))}}function Fa(t,n){return this.each((typeof n=="function"?Ra:Ca)(t,n))}function*La(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Qe=[null];function k(t,n){this._groups=t,this._parents=n}function zt(){return new k([[document.documentElement]],Qe)}function Da(){return this}k.prototype=zt.prototype={constructor:k,select:fo,selectAll:go,selectChild:vo,selectChildren:Mo,filter:$o,data:zo,enter:Ao,exit:Oo,join:Io,merge:ko,selection:Da,order:Co,sort:Ro,call:Lo,nodes:Do,node:Ho,size:qo,empty:Bo,each:Xo,attr:Wo,style:ta,property:ia,classed:ua,text:ha,html:ya,raise:ma,lower:wa,append:ba,insert:Ma,remove:Aa,clone:Pa,datum:Ea,on:ka,dispatch:Fa,[Symbol.iterator]:La};function T(t){return typeof t=="string"?new k([[document.querySelector(t)]],[document.documentElement]):new k([[t]],Qe)}function Ha(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Bn(t,n){if(t=Ha(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const qa={passive:!1},Nt={capture:!0,passive:!1};function Xn(t){t.stopImmediatePropagation()}function wt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ba(t){var n=t.document.documentElement,e=T(t).on("dragstart.drag",wt,Nt);"onselectstart"in n?e.on("selectstart.drag",wt,Nt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xa(t,n){var e=t.document.documentElement,r=T(t).on("dragstart.drag",null);n&&(r.on("click.drag",wt,Nt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const en=t=>()=>t;function Gn(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:f}})}Gn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ga(t){return!t.ctrlKey&&!t.button}function Ua(){return this.parentNode}function Ya(t,n){return n??{x:t.x,y:t.y}}function Ka(){return navigator.maxTouchPoints||"ontouchstart"in this}function Va(){var t=Ga,n=Ua,e=Ya,r=Ka,i={},o=Ln("start","drag","end"),a=0,s,u,l,f,c=0;function h(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",b).on("touchmove.drag",_,qa).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,v){if(!(f||!t.call(this,y,v))){var S=$(this,n.call(this,y,v),y,v,"mouse");S&&(T(y.view).on("mousemove.drag",d,Nt).on("mouseup.drag",p,Nt),Ba(y.view),Xn(y),l=!1,s=y.clientX,u=y.clientY,S("start",y))}}function d(y){if(wt(y),!l){var v=y.clientX-s,S=y.clientY-u;l=v*v+S*S>c}i.mouse("drag",y)}function p(y){T(y.view).on("mousemove.drag mouseup.drag",null),Xa(y.view,l),wt(y),i.mouse("end",y)}function b(y,v){if(t.call(this,y,v)){var S=y.changedTouches,P=n.call(this,y,v),N=S.length,Y,ot;for(Y=0;Y<N;++Y)(ot=$(this,P,y,v,S[Y].identifier,S[Y]))&&(Xn(y),ot("start",y,S[Y]))}}function _(y){var v=y.changedTouches,S=v.length,P,N;for(P=0;P<S;++P)(N=i[v[P].identifier])&&(wt(y),N("drag",y,v[P]))}function M(y){var v=y.changedTouches,S=v.length,P,N;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),P=0;P<S;++P)(N=i[v[P].identifier])&&(Xn(y),N("end",y,v[P]))}function $(y,v,S,P,N,Y){var ot=o.copy(),w=Bn(Y||S,v),K,O,q;if((q=e.call(y,new Gn("beforestart",{sourceEvent:S,target:h,identifier:N,active:a,x:w[0],y:w[1],dx:0,dy:0,dispatch:ot}),P))!=null)return K=q.x-w[0]||0,O=q.y-w[1]||0,function Rn(st,_t,Et){var R=w,Fe;switch(st){case"start":i[N]=Rn,Fe=a++;break;case"end":delete i[N],--a;case"drag":w=Bn(Et||_t,v),Fe=a;break}ot.call(st,y,new Gn(st,{sourceEvent:_t,subject:q,target:h,identifier:N,active:Fe,x:w[0]+K,y:w[1]+O,dx:w[0]-R[0],dy:w[1]-R[1],dispatch:ot}),P)}}return h.filter=function(y){return arguments.length?(t=typeof y=="function"?y:en(!!y),h):t},h.container=function(y){return arguments.length?(n=typeof y=="function"?y:en(y),h):n},h.subject=function(y){return arguments.length?(e=typeof y=="function"?y:en(y),h):e},h.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:en(!!y),h):r},h.on=function(){var y=o.on.apply(o,arguments);return y===o?h:y},h.clickDistance=function(y){return arguments.length?(c=(y=+y)*y,h):Math.sqrt(c)},h}function Un(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function je(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ot(){}var It=.7,rn=1/It,bt="\\s*([+-]?\\d+)\\s*",kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",B="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Za=/^#([0-9a-f]{3,8})$/,Wa=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Ja=new RegExp(`^rgb\\(${B},${B},${B}\\)$`),Qa=new RegExp(`^rgba\\(${bt},${bt},${bt},${kt}\\)$`),ja=new RegExp(`^rgba\\(${B},${B},${B},${kt}\\)$`),ts=new RegExp(`^hsl\\(${kt},${B},${B}\\)$`),ns=new RegExp(`^hsla\\(${kt},${B},${B},${kt}\\)$`),tr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Un(Ot,ut,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nr,formatHex:nr,formatHex8:es,formatHsl:rs,formatRgb:er,toString:er});function nr(){return this.rgb().formatHex()}function es(){return this.rgb().formatHex8()}function rs(){return sr(this).formatHsl()}function er(){return this.rgb().formatRgb()}function ut(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Za.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?rr(n):e===3?new I(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?on(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?on(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Wa.exec(t))?new I(n[1],n[2],n[3],1):(n=Ja.exec(t))?new I(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Qa.exec(t))?on(n[1],n[2],n[3],n[4]):(n=ja.exec(t))?on(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=ts.exec(t))?ar(n[1],n[2]/100,n[3]/100,1):(n=ns.exec(t))?ar(n[1],n[2]/100,n[3]/100,n[4]):tr.hasOwnProperty(t)?rr(tr[t]):t==="transparent"?new I(NaN,NaN,NaN,0):null}function rr(t){return new I(t>>16&255,t>>8&255,t&255,1)}function on(t,n,e,r){return r<=0&&(t=n=e=NaN),new I(t,n,e,r)}function is(t){return t instanceof Ot||(t=ut(t)),t?(t=t.rgb(),new I(t.r,t.g,t.b,t.opacity)):new I}function Yn(t,n,e,r){return arguments.length===1?is(t):new I(t,n,e,r??1)}function I(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}Un(I,Yn,je(Ot,{brighter(t){return t=t==null?rn:Math.pow(rn,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?It:Math.pow(It,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new I(lt(this.r),lt(this.g),lt(this.b),an(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ir,formatHex:ir,formatHex8:os,formatRgb:or,toString:or}));function ir(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function os(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function or(){const t=an(this.opacity);return`${t===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${t===1?")":`, ${t})`}`}function an(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ft(t){return t=lt(t),(t<16?"0":"")+t.toString(16)}function ar(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new F(t,n,e,r)}function sr(t){if(t instanceof F)return new F(t.h,t.s,t.l,t.opacity);if(t instanceof Ot||(t=ut(t)),!t)return new F;if(t instanceof F)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,u=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new F(a,s,u,t.opacity)}function as(t,n,e,r){return arguments.length===1?sr(t):new F(t,n,e,r??1)}function F(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}Un(F,as,je(Ot,{brighter(t){return t=t==null?rn:Math.pow(rn,t),new F(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?It:Math.pow(It,t),new F(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new I(Kn(t>=240?t-240:t+120,i,r),Kn(t,i,r),Kn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new F(ur(this.h),sn(this.s),sn(this.l),an(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=an(this.opacity);return`${t===1?"hsl(":"hsla("}${ur(this.h)}, ${sn(this.s)*100}%, ${sn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ur(t){return t=(t||0)%360,t<0?t+360:t}function sn(t){return Math.max(0,Math.min(1,t||0))}function Kn(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const Vn=t=>()=>t;function ss(t,n){return function(e){return t+e*n}}function us(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function ls(t){return(t=+t)==1?lr:function(n,e){return e-n?us(n,e,t):Vn(isNaN(n)?e:n)}}function lr(t,n){var e=n-t;return e?ss(t,e):Vn(isNaN(t)?n:t)}const un=function t(n){var e=ls(n);function r(i,o){var a=e((i=Yn(i)).r,(o=Yn(o)).r),s=e(i.g,o.g),u=e(i.b,o.b),l=lr(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=t,r}(1);function fs(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function cs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hs(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)i[a]=Jn(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function ds(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function L(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ps(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=Jn(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var Zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wn=new RegExp(Zn.source,"g");function gs(t){return function(){return t}}function ys(t){return function(n){return t(n)+""}}function fr(t,n){var e=Zn.lastIndex=Wn.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(t=t+"",n=n+"";(r=Zn.exec(t))&&(i=Wn.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:L(r,i)})),e=Wn.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?ys(u[0].x):gs(n):(n=u.length,function(l){for(var f=0,c;f<n;++f)s[(c=u[f]).i]=c.x(l);return s.join("")})}function Jn(t,n){var e=typeof n,r;return n==null||e==="boolean"?Vn(n):(e==="number"?L:e==="string"?(r=ut(n))?(n=r,un):fr:n instanceof ut?un:n instanceof Date?ds:cs(n)?fs:Array.isArray(n)?hs:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?ps:L)(t,n)}function _s(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var cr=180/Math.PI,Qn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hr(t,n,e,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*cr,skewX:Math.atan(u)*cr,scaleX:a,scaleY:s}}var ln;function ms(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Qn:hr(n.a,n.b,n.c,n.d,n.e,n.f)}function vs(t){return t==null||(ln||(ln=document.createElementNS("http://www.w3.org/2000/svg","g")),ln.setAttribute("transform",t),!(t=ln.transform.baseVal.consolidate()))?Qn:(t=t.matrix,hr(t.a,t.b,t.c,t.d,t.e,t.f))}function dr(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,f,c,h,g,d){if(l!==c||f!==h){var p=g.push("translate(",null,n,null,e);d.push({i:p-4,x:L(l,c)},{i:p-2,x:L(f,h)})}else(c||h)&&g.push("translate("+c+n+h+e)}function a(l,f,c,h){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:L(l,f)})):f&&c.push(i(c)+"rotate("+f+r)}function s(l,f,c,h){l!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:L(l,f)}):f&&c.push(i(c)+"skewX("+f+r)}function u(l,f,c,h,g,d){if(l!==c||f!==h){var p=g.push(i(g)+"scale(",null,",",null,")");d.push({i:p-4,x:L(l,c)},{i:p-2,x:L(f,h)})}else(c!==1||h!==1)&&g.push(i(g)+"scale("+c+","+h+")")}return function(l,f){var c=[],h=[];return l=t(l),f=t(f),o(l.translateX,l.translateY,f.translateX,f.translateY,c,h),a(l.rotate,f.rotate,c,h),s(l.skewX,f.skewX,c,h),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,c,h),l=f=null,function(g){for(var d=-1,p=h.length,b;++d<p;)c[(b=h[d]).i]=b.x(g);return c.join("")}}}var ws=dr(ms,"px, ","px)","deg)"),bs=dr(vs,", ",")",")"),xt=0,Ct=0,Rt=0,pr=1e3,fn,Ft,cn=0,ct=0,hn=0,Lt=typeof performance=="object"&&performance.now?performance:Date,gr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dn(){return ct||(gr(xs),ct=Lt.now()+hn)}function xs(){ct=0}function Dt(){this._call=this._time=this._next=null}Dt.prototype=yr.prototype={constructor:Dt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?dn():+e)+(n==null?0:+n),!this._next&&Ft!==this&&(Ft?Ft._next=this:fn=this,Ft=this),this._call=t,this._time=e,jn()},stop:function(){this._call&&(this._call=null,this._time=1/0,jn())}};function yr(t,n,e){var r=new Dt;return r.restart(t,n,e),r}function Ms(){dn(),++xt;for(var t=fn,n;t;)(n=ct-t._time)>=0&&t._call.call(void 0,n),t=t._next;--xt}function _r(){ct=(cn=Lt.now())+hn,xt=Ct=0;try{Ms()}finally{xt=0,As(),ct=0}}function $s(){var t=Lt.now(),n=t-cn;n>pr&&(hn-=n,cn=t)}function As(){for(var t,n=fn,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:fn=e);Ft=t,jn(r)}function jn(t){if(!xt){Ct&&(Ct=clearTimeout(Ct));var n=t-ct;n>24?(t<1/0&&(Ct=setTimeout(_r,t-Lt.now()-hn)),Rt&&(Rt=clearInterval(Rt))):(Rt||(cn=Lt.now(),Rt=setInterval($s,pr)),xt=1,gr(_r))}}function mr(t,n,e){var r=new Dt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}function Ts(t,n,e){var r=new Dt,i=n;return r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?dn():+s,r._restart(function u(l){l+=i,r._restart(u,i+=a,s),o(l)},a,s)},r.restart(t,n,e),r}var Ss=Ln("start","end","cancel","interrupt"),Ps=[],vr=0,wr=1,te=2,pn=3,br=4,ne=5,gn=6;function yn(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Es(t,e,{name:n,index:r,group:i,on:Ss,tween:Ps,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vr})}function ee(t,n){var e=D(t,n);if(e.state>vr)throw new Error("too late; already scheduled");return e}function X(t,n){var e=D(t,n);if(e.state>pn)throw new Error("too late; already running");return e}function D(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Es(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=yr(o,0,e.time);function o(l){e.state=wr,e.timer.restart(a,e.delay,e.time),e.delay<=l&&a(l-e.delay)}function a(l){var f,c,h,g;if(e.state!==wr)return u();for(f in r)if(g=r[f],g.name===e.name){if(g.state===pn)return mr(a);g.state===br?(g.state=gn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[f]):+f<n&&(g.state=gn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[f])}if(mr(function(){e.state===pn&&(e.state=br,e.timer.restart(s,e.delay,e.time),s(l))}),e.state=te,e.on.call("start",t,t.__data__,e.index,e.group),e.state===te){for(e.state=pn,i=new Array(h=e.tween.length),f=0,c=-1;f<h;++f)(g=e.tween[f].value.call(t,t.__data__,e.index,e.group))&&(i[++c]=g);i.length=c+1}}function s(l){for(var f=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(u),e.state=ne,1),c=-1,h=i.length;++c<h;)i[c].call(t,f);e.state===ne&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){e.state=gn,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function zs(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>te&&r.state<ne,r.state=gn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function Ns(t){return this.each(function(){zs(this,t)})}function Os(t,n){var e,r;return function(){var i=X(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Is(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=X(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function ks(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=D(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?Os:Is)(e,t,n))}function re(t,n,e){var r=t._id;return t.each(function(){var i=X(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return D(i,r).value[n]}}function xr(t,n){var e;return(typeof n=="number"?L:n instanceof ut?un:(e=ut(n))?(n=e,un):fr)(t,n)}function Cs(t){return function(){this.removeAttribute(t)}}function Rs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fs(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function Ls(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function Ds(t,n,e){var r,i,o;return function(){var a,s=e(this),u;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s)))}}function Hs(t,n,e){var r,i,o;return function(){var a,s=e(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s)))}}function qs(t,n){var e=tn(t),r=e==="transform"?bs:xr;return this.attrTween(t,typeof n=="function"?(e.local?Hs:Ds)(e,r,re(this,"attr."+t,n)):n==null?(e.local?Rs:Cs)(e):(e.local?Ls:Fs)(e,r,n))}function Bs(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Xs(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Gs(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Xs(t,o)),e}return i._value=n,i}function Us(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Bs(t,o)),e}return i._value=n,i}function Ys(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=tn(t);return this.tween(e,(r.local?Gs:Us)(r,n))}function Ks(t,n){return function(){ee(this,t).delay=+n.apply(this,arguments)}}function Vs(t,n){return n=+n,function(){ee(this,t).delay=n}}function Zs(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ks:Vs)(n,t)):D(this.node(),n).delay}function Ws(t,n){return function(){X(this,t).duration=+n.apply(this,arguments)}}function Js(t,n){return n=+n,function(){X(this,t).duration=n}}function Qs(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ws:Js)(n,t)):D(this.node(),n).duration}function js(t,n){if(typeof n!="function")throw new Error;return function(){X(this,t).ease=n}}function tu(t){var n=this._id;return arguments.length?this.each(js(n,t)):D(this.node(),n).ease}function nu(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;X(this,t).ease=e}}function eu(t){if(typeof t!="function")throw new Error;return this.each(nu(this._id,t))}function ru(t){typeof t!="function"&&(t=Xe(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new V(r,this._parents,this._name,this._id)}function iu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=n[s],l=e[s],f=u.length,c=a[s]=new Array(f),h,g=0;g<f;++g)(h=u[g]||l[g])&&(c[g]=h);for(;s<r;++s)a[s]=n[s];return new V(a,this._parents,this._name,this._id)}function ou(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function au(t,n,e){var r,i,o=ou(n)?ee:X;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function su(t,n){var e=this._id;return arguments.length<2?D(this.node(),e).on.on(t):this.each(au(e,t,n))}function uu(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function lu(){return this.on("end.remove",uu(this._id))}function fu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Hn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),f,c,h=0;h<u;++h)(f=s[h])&&(c=t.call(f,f.__data__,h,s))&&("__data__"in f&&(c.__data__=f.__data__),l[h]=c,yn(l[h],n,e,h,l,D(f,e)));return new V(o,this._parents,n,e)}function cu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Be(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,f,c=0;c<l;++c)if(f=u[c]){for(var h=t.call(f,f.__data__,c,u),g,d=D(f,e),p=0,b=h.length;p<b;++p)(g=h[p])&&yn(g,n,e,p,h,d);o.push(h),a.push(f)}return new V(o,a,n,e)}var hu=zt.prototype.constructor;function du(){return new hu(this._groups,this._parents)}function pu(t,n){var e,r,i;return function(){var o=vt(this,t),a=(this.style.removeProperty(t),vt(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Mr(t){return function(){this.style.removeProperty(t)}}function gu(t,n,e){var r,i=e+"",o;return function(){var a=vt(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function yu(t,n,e){var r,i,o;return function(){var a=vt(this,t),s=e(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),vt(this,t))),a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s))}}function _u(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var u=X(this,t),l=u.on,f=u.value[o]==null?s||(s=Mr(n)):void 0;(l!==e||i!==f)&&(r=(e=l).copy()).on(a,i=f),u.on=r}}function mu(t,n,e){var r=(t+="")=="transform"?ws:xr;return n==null?this.styleTween(t,pu(t,r)).on("end.style."+t,Mr(t)):typeof n=="function"?this.styleTween(t,yu(t,r,re(this,"style."+t,n))).each(_u(this._id,t)):this.styleTween(t,gu(t,r,n),e).on("end.style."+t,null)}function vu(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function wu(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&vu(t,a,e)),r}return o._value=n,o}function bu(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,wu(t,n,e??""))}function xu(t){return function(){this.textContent=t}}function Mu(t){return function(){var n=t(this);this.textContent=n??""}}function $u(t){return this.tween("text",typeof t=="function"?Mu(re(this,"text",t)):xu(t==null?"":t+""))}function Au(t){return function(n){this.textContent=t.call(this,n)}}function Tu(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Au(i)),n}return r._value=t,r}function Su(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Tu(t))}function Pu(){for(var t=this._name,n=this._id,e=$r(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var f=D(u,n);yn(u,t,e,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new V(r,this._parents,t,e)}function Eu(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};e.each(function(){var l=X(this,r),f=l.on;f!==t&&(n=(t=f).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),l.on=n}),i===0&&o()})}var zu=0;function V(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function $r(){return++zu}var Z=zt.prototype;V.prototype={constructor:V,select:fu,selectAll:cu,selectChild:Z.selectChild,selectChildren:Z.selectChildren,filter:ru,merge:iu,selection:du,transition:Pu,call:Z.call,nodes:Z.nodes,node:Z.node,size:Z.size,empty:Z.empty,each:Z.each,on:su,attr:qs,attrTween:Ys,style:mu,styleTween:bu,text:$u,textTween:Su,remove:lu,tween:ks,delay:Zs,duration:Qs,ease:tu,easeVarying:eu,end:Eu,[Symbol.iterator]:Z[Symbol.iterator]};function Nu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ou={time:null,delay:0,duration:250,ease:Nu};function Iu(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function ku(t){var n,e;t instanceof V?(n=t._id,t=t._name):(n=$r(),(e=Ou).time=dn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&yn(u,t,n,l,a,e||Iu(u,n));return new V(r,this._parents,t,n)}zt.prototype.interrupt=Ns,zt.prototype.transition=ku;const ie=Math.PI,oe=2*ie,ht=1e-6,Cu=oe-ht;function Ar(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Ru(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Ar;const e=10**n;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class ae{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Ar:Ru(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,o,a){this._append`C${+n},${+e},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(n,e,r,i,o){if(n=+n,e=+e,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-n,l=i-e,f=a-n,c=s-e,h=f*f+c*c;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(h>ht)if(!(Math.abs(c*u-l*f)>ht)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let g=r-a,d=i-s,p=u*u+l*l,b=g*g+d*d,_=Math.sqrt(p),M=Math.sqrt(h),$=o*Math.tan((ie-Math.acos((p+h-b)/(2*_*M)))/2),y=$/M,v=$/_;Math.abs(y-1)>ht&&this._append`L${n+y*f},${e+y*c}`,this._append`A${o},${o},0,0,${+(c*g>f*d)},${this._x1=n+v*u},${this._y1=e+v*l}`}}arc(n,e,r,i,o,a){if(n=+n,e=+e,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=n+s,f=e+u,c=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>ht||Math.abs(this._y1-f)>ht)&&this._append`L${l},${f}`,r&&(h<0&&(h=h%oe+oe),h>Cu?this._append`A${r},${r},0,1,${c},${n-s},${e-u}A${r},${r},0,1,${c},${this._x1=l},${this._y1=f}`:h>ht&&this._append`A${r},${r},0,${+(h>=ie)},${c},${this._x1=n+r*Math.cos(o)},${this._y1=e+r*Math.sin(o)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function H(){return new ae}H.prototype=ae.prototype;function Fu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _n(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Mt(t){return t=_n(Math.abs(t)),t?t[1]:NaN}function Lu(t,n){return function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}}function Du(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var Hu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mn(t){if(!(n=Hu.exec(t)))throw new Error("invalid format: "+t);var n;return new se({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}mn.prototype=se.prototype;function se(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}se.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qu(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Tr;function Bu(t,n){var e=_n(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Tr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+_n(t,Math.max(0,n+o-1))[0]}function Sr(t,n){var e=_n(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pr={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Fu,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Sr(t*100,n),r:Sr,s:Bu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Er(t){return t}var zr=Array.prototype.map,Nr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xu(t){var n=t.grouping===void 0||t.thousands===void 0?Er:Lu(zr.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Er:Du(zr.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=mn(c);var h=c.fill,g=c.align,d=c.sign,p=c.symbol,b=c.zero,_=c.width,M=c.comma,$=c.precision,y=c.trim,v=c.type;v==="n"?(M=!0,v="g"):Pr[v]||($===void 0&&($=12),y=!0,v="g"),(b||h==="0"&&g==="=")&&(b=!0,h="0",g="=");var S=p==="$"?e:p==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",P=p==="$"?r:/[%p]/.test(v)?a:"",N=Pr[v],Y=/[defgprs%]/.test(v);$=$===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function ot(w){var K=S,O=P,q,Rn,st;if(v==="c")O=N(w)+O,w="";else{w=+w;var _t=w<0||1/w<0;if(w=isNaN(w)?u:N(Math.abs(w),$),y&&(w=qu(w)),_t&&+w==0&&d!=="+"&&(_t=!1),K=(_t?d==="("?d:s:d==="-"||d==="("?"":d)+K,O=(v==="s"?Nr[8+Tr/3]:"")+O+(_t&&d==="("?")":""),Y){for(q=-1,Rn=w.length;++q<Rn;)if(st=w.charCodeAt(q),48>st||st>57){O=(st===46?i+w.slice(q+1):w.slice(q))+O,w=w.slice(0,q);break}}}M&&!b&&(w=n(w,1/0));var Et=K.length+w.length+O.length,R=Et<_?new Array(_-Et+1).join(h):"";switch(M&&b&&(w=n(R+w,R.length?_-O.length:1/0),R=""),g){case"<":w=K+w+O+R;break;case"=":w=K+R+w+O;break;case"^":w=R.slice(0,Et=R.length>>1)+K+w+O+R.slice(Et);break;default:w=R+K+w+O;break}return o(w)}return ot.toString=function(){return c+""},ot}function f(c,h){var g=l((c=mn(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(Mt(h)/3)))*3,p=Math.pow(10,-d),b=Nr[8+d/3];return function(_){return g(p*_)+b}}return{format:l,formatPrefix:f}}var vn,wn,Or;Gu({thousands:",",grouping:[3],currency:["$",""]});function Gu(t){return vn=Xu(t),wn=vn.format,Or=vn.formatPrefix,vn}function Uu(t){return Math.max(0,-Mt(Math.abs(t)))}function Yu(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mt(n)/3)))*3-Mt(Math.abs(t)))}function Ku(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Mt(n)-Mt(t))+1}function Vu(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function Zu(t){return function(){return t}}function Wu(t){return+t}var Ir=[0,1];function $t(t){return t}function ue(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Zu(isNaN(n)?NaN:.5)}function Ju(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function Qu(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=ue(i,r),o=e(a,o)):(r=ue(r,i),o=e(o,a)),function(s){return o(r(s))}}function ju(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=ue(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(s){var u=Ji(t,s,1,r)-1;return o[u](i[u](s))}}function tl(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nl(){var t=Ir,n=Ir,e=Jn,r,i,o,a=$t,s,u,l;function f(){var h=Math.min(t.length,n.length);return a!==$t&&(a=Ju(t[0],t[h-1])),s=h>2?ju:Qu,u=l=null,c}function c(h){return h==null||isNaN(h=+h)?o:(u||(u=s(t.map(r),n,e)))(r(a(h)))}return c.invert=function(h){return a(i((l||(l=s(n,t.map(r),L)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,Wu),f()):t.slice()},c.range=function(h){return arguments.length?(n=Array.from(h),f()):n.slice()},c.rangeRound=function(h){return n=Array.from(h),e=_s,f()},c.clamp=function(h){return arguments.length?(a=h?!0:$t,f()):a!==$t},c.interpolate=function(h){return arguments.length?(e=h,f()):e},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,g){return r=h,i=g,f()}}function el(){return nl()($t,$t)}function rl(t,n,e,r){var i=eo(t,n,e),o;switch(r=mn(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=Yu(i,a))&&(r.precision=o),Or(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Ku(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Uu(i))&&(r.precision=o-(r.type==="%")*2);break}}return wn(r)}function il(t){var n=t.domain;return t.ticks=function(e){var r=n();return no(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return rl(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,f=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);f-- >0;){if(l=Fn(a,s,e),l===u)return r[i]=a,r[o]=s,n(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function G(){var t=el();return t.copy=function(){return tl(t,G())},Vu.apply(t,arguments),il(t)}function At(t){return function(){return t}}function ol(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new ae(n)}function al(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kr(t){this._context=t}kr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function sl(t){return new kr(t)}function ul(t){return t[0]}function ll(t){return t[1]}function fl(t,n){var e=At(!0),r=null,i=sl,o=null,a=ol(s);t=typeof t=="function"?t:t===void 0?ul:At(t),n=typeof n=="function"?n:n===void 0?ll:At(n);function s(u){var l,f=(u=al(u)).length,c,h=!1,g;for(r==null&&(o=i(g=a())),l=0;l<=f;++l)!(l<f&&e(c=u[l],l,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,l,u),+n(c,l,u));if(g)return o=null,g+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:At(+u),s):t},s.y=function(u){return arguments.length?(n=typeof u=="function"?u:At(+u),s):n},s.defined=function(u){return arguments.length?(e=typeof u=="function"?u:At(!!u),s):e},s.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),s):r},s}function Ht(t,n,e){this.k=t,this.x=n,this.y=e}Ht.prototype={constructor:Ht,scale:function(t){return t===1?this:new Ht(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Ht(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ht.prototype;var Cr=typeof global=="object"&&global&&global.Object===Object&&global,cl=typeof self=="object"&&self&&self.Object===Object&&self,W=Cr||cl||Function("return this")(),U=W.Symbol,Rr=Object.prototype,hl=Rr.hasOwnProperty,dl=Rr.toString,qt=U?U.toStringTag:void 0;function pl(t){var n=hl.call(t,qt),e=t[qt];try{t[qt]=void 0;var r=!0}catch{}var i=dl.call(t);return r&&(n?t[qt]=e:delete t[qt]),i}var gl=Object.prototype,yl=gl.toString;function _l(t){return yl.call(t)}var ml="[object Null]",vl="[object Undefined]",Fr=U?U.toStringTag:void 0;function Tt(t){return t==null?t===void 0?vl:ml:Fr&&Fr in Object(t)?pl(t):_l(t)}function St(t){return t!=null&&typeof t=="object"}var wl="[object Symbol]";function Bt(t){return typeof t=="symbol"||St(t)&&Tt(t)==wl}function bn(t,n){for(var e=-1,r=t==null?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}var C=Array.isArray,Lr=U?U.prototype:void 0,Dr=Lr?Lr.toString:void 0;function Hr(t){if(typeof t=="string")return t;if(C(t))return bn(t,Hr)+"";if(Bt(t))return Dr?Dr.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}var bl=/\s/;function xl(t){for(var n=t.length;n--&&bl.test(t.charAt(n)););return n}var Ml=/^\s+/;function $l(t){return t&&t.slice(0,xl(t)+1).replace(Ml,"")}function J(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var qr=NaN,Al=/^[-+]0x[0-9a-f]+$/i,Tl=/^0b[01]+$/i,Sl=/^0o[0-7]+$/i,Pl=parseInt;function El(t){if(typeof t=="number")return t;if(Bt(t))return qr;if(J(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=J(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=$l(t);var e=Tl.test(t);return e||Sl.test(t)?Pl(t.slice(2),e?2:8):Al.test(t)?qr:+t}var zl=1/0,Nl=17976931348623157e292;function le(t){if(!t)return t===0?t:0;if(t=El(t),t===zl||t===-1/0){var n=t<0?-1:1;return n*Nl}return t===t?t:0}function fe(t){return t}var Ol="[object AsyncFunction]",Il="[object Function]",kl="[object GeneratorFunction]",Cl="[object Proxy]";function Br(t){if(!J(t))return!1;var n=Tt(t);return n==Il||n==kl||n==Ol||n==Cl}var ce=W["__core-js_shared__"],Xr=function(){var t=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Rl(t){return!!Xr&&Xr in t}var Fl=Function.prototype,Ll=Fl.toString;function dt(t){if(t!=null){try{return Ll.call(t)}catch{}try{return t+""}catch{}}return""}var Dl=/[\\^$.*+?()[\]{}|]/g,Hl=/^\[object .+?Constructor\]$/,ql=Function.prototype,Bl=Object.prototype,Xl=ql.toString,Gl=Bl.hasOwnProperty,Ul=RegExp("^"+Xl.call(Gl).replace(Dl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yl(t){if(!J(t)||Rl(t))return!1;var n=Br(t)?Ul:Hl;return n.test(dt(t))}function Kl(t,n){return t==null?void 0:t[n]}function pt(t,n){var e=Kl(t,n);return Yl(e)?e:void 0}var he=pt(W,"WeakMap"),Gr=function(){try{var t=pt(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Vl(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}var Zl=9007199254740991,Wl=/^(?:0|[1-9]\d*)$/;function xn(t,n){var e=typeof t;return n=n??Zl,!!n&&(e=="number"||e!="symbol"&&Wl.test(t))&&t>-1&&t%1==0&&t<n}function Jl(t,n,e){n=="__proto__"&&Gr?Gr(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Mn(t,n){return t===n||t!==t&&n!==n}var Ql=Object.prototype,jl=Ql.hasOwnProperty;function tf(t,n,e){var r=t[n];(!(jl.call(t,n)&&Mn(r,e))||e===void 0&&!(n in t))&&Jl(t,n,e)}var nf=9007199254740991;function de(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nf}function Xt(t){return t!=null&&de(t.length)&&!Br(t)}function ef(t,n,e){if(!J(e))return!1;var r=typeof n;return(r=="number"?Xt(e)&&xn(n,e.length):r=="string"&&n in e)?Mn(e[n],t):!1}var rf=Object.prototype;function Ur(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||rf;return t===e}function of(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var af="[object Arguments]";function Yr(t){return St(t)&&Tt(t)==af}var Kr=Object.prototype,sf=Kr.hasOwnProperty,uf=Kr.propertyIsEnumerable,pe=Yr(function(){return arguments}())?Yr:function(t){return St(t)&&sf.call(t,"callee")&&!uf.call(t,"callee")};function lf(){return!1}var Vr=typeof E=="object"&&E&&!E.nodeType&&E,Zr=Vr&&typeof module=="object"&&module&&!module.nodeType&&module,ff=Zr&&Zr.exports===Vr,Wr=ff?W.Buffer:void 0,cf=Wr?Wr.isBuffer:void 0,ge=cf||lf,hf="[object Arguments]",df="[object Array]",pf="[object Boolean]",gf="[object Date]",yf="[object Error]",_f="[object Function]",mf="[object Map]",vf="[object Number]",wf="[object Object]",bf="[object RegExp]",xf="[object Set]",Mf="[object String]",$f="[object WeakMap]",Af="[object ArrayBuffer]",Tf="[object DataView]",Sf="[object Float32Array]",Pf="[object Float64Array]",Ef="[object Int8Array]",zf="[object Int16Array]",Nf="[object Int32Array]",Of="[object Uint8Array]",If="[object Uint8ClampedArray]",kf="[object Uint16Array]",Cf="[object Uint32Array]",x={};x[Sf]=x[Pf]=x[Ef]=x[zf]=x[Nf]=x[Of]=x[If]=x[kf]=x[Cf]=!0,x[hf]=x[df]=x[Af]=x[pf]=x[Tf]=x[gf]=x[yf]=x[_f]=x[mf]=x[vf]=x[wf]=x[bf]=x[xf]=x[Mf]=x[$f]=!1;function Rf(t){return St(t)&&de(t.length)&&!!x[Tt(t)]}function Ff(t){return function(n){return t(n)}}var Jr=typeof E=="object"&&E&&!E.nodeType&&E,Gt=Jr&&typeof module=="object"&&module&&!module.nodeType&&module,Lf=Gt&&Gt.exports===Jr,ye=Lf&&Cr.process,Qr=function(){try{var t=Gt&&Gt.require&&Gt.require("util").types;return t||ye&&ye.binding&&ye.binding("util")}catch{}}(),jr=Qr&&Qr.isTypedArray,ti=jr?Ff(jr):Rf,Df=Object.prototype,Hf=Df.hasOwnProperty;function ni(t,n){var e=C(t),r=!e&&pe(t),i=!e&&!r&&ge(t),o=!e&&!r&&!i&&ti(t),a=e||r||i||o,s=a?of(t.length,String):[],u=s.length;for(var l in t)(n||Hf.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||xn(l,u)))&&s.push(l);return s}function ei(t,n){return function(e){return t(n(e))}}var qf=ei(Object.keys,Object),Bf=Object.prototype,Xf=Bf.hasOwnProperty;function Gf(t){if(!Ur(t))return qf(t);var n=[];for(var e in Object(t))Xf.call(t,e)&&e!="constructor"&&n.push(e);return n}function $n(t){return Xt(t)?ni(t):Gf(t)}function Uf(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var Yf=Object.prototype,Kf=Yf.hasOwnProperty;function Vf(t){if(!J(t))return Uf(t);var n=Ur(t),e=[];for(var r in t)r=="constructor"&&(n||!Kf.call(t,r))||e.push(r);return e}function Zf(t){return Xt(t)?ni(t,!0):Vf(t)}var Wf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jf=/^\w*$/;function _e(t,n){if(C(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Bt(t)?!0:Jf.test(t)||!Wf.test(t)||n!=null&&t in Object(n)}var Ut=pt(Object,"create");function Qf(){this.__data__=Ut?Ut(null):{},this.size=0}function jf(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var tc="__lodash_hash_undefined__",nc=Object.prototype,ec=nc.hasOwnProperty;function rc(t){var n=this.__data__;if(Ut){var e=n[t];return e===tc?void 0:e}return ec.call(n,t)?n[t]:void 0}var ic=Object.prototype,oc=ic.hasOwnProperty;function ac(t){var n=this.__data__;return Ut?n[t]!==void 0:oc.call(n,t)}var sc="__lodash_hash_undefined__";function uc(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Ut&&n===void 0?sc:n,this}function gt(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}gt.prototype.clear=Qf,gt.prototype.delete=jf,gt.prototype.get=rc,gt.prototype.has=ac,gt.prototype.set=uc;function lc(){this.__data__=[],this.size=0}function An(t,n){for(var e=t.length;e--;)if(Mn(t[e][0],n))return e;return-1}var fc=Array.prototype,cc=fc.splice;function hc(t){var n=this.__data__,e=An(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():cc.call(n,e,1),--this.size,!0}function dc(t){var n=this.__data__,e=An(n,t);return e<0?void 0:n[e][1]}function pc(t){return An(this.__data__,t)>-1}function gc(t,n){var e=this.__data__,r=An(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function Q(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Q.prototype.clear=lc,Q.prototype.delete=hc,Q.prototype.get=dc,Q.prototype.has=pc,Q.prototype.set=gc;var Yt=pt(W,"Map");function yc(){this.size=0,this.__data__={hash:new gt,map:new(Yt||Q),string:new gt}}function _c(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Tn(t,n){var e=t.__data__;return _c(n)?e[typeof n=="string"?"string":"hash"]:e.map}function mc(t){var n=Tn(this,t).delete(t);return this.size-=n?1:0,n}function vc(t){return Tn(this,t).get(t)}function wc(t){return Tn(this,t).has(t)}function bc(t,n){var e=Tn(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function j(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}j.prototype.clear=yc,j.prototype.delete=mc,j.prototype.get=vc,j.prototype.has=wc,j.prototype.set=bc;var xc="Expected a function";function me(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(xc);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return e.cache=o.set(i,a)||o,a};return e.cache=new(me.Cache||j),e}me.Cache=j;var Mc=500;function $c(t){var n=me(t,function(r){return e.size===Mc&&e.clear(),r}),e=n.cache;return n}var Ac=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tc=/\\(\\)?/g,Sc=$c(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Ac,function(e,r,i,o){n.push(i?o.replace(Tc,"$1"):r||e)}),n});function Sn(t){return t==null?"":Hr(t)}function Pn(t,n){return C(t)?t:_e(t,n)?[t]:Sc(Sn(t))}function Kt(t){if(typeof t=="string"||Bt(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}function ve(t,n){n=Pn(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[Kt(n[e++])];return e&&e==r?t:void 0}function Pc(t,n,e){var r=t==null?void 0:ve(t,n);return r===void 0?e:r}function we(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var ri=U?U.isConcatSpreadable:void 0;function Ec(t){return C(t)||pe(t)||!!(ri&&t&&t[ri])}function zc(t,n,e,r,i){var o=-1,a=t.length;for(e||(e=Ec),i||(i=[]);++o<a;){var s=t[o];e(s)?we(i,s):i[i.length]=s}return i}function Nc(t){var n=t==null?0:t.length;return n?zc(t):[]}var Oc=ei(Object.getPrototypeOf,Object);function Ic(t,n,e){var r=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+n];return o}function kc(t,n,e){var r=t.length;return e=e===void 0?r:e,Ic(t,n,e)}var Cc="\\ud800-\\udfff",Rc="\\u0300-\\u036f",Fc="\\ufe20-\\ufe2f",Lc="\\u20d0-\\u20ff",Dc=Rc+Fc+Lc,Hc="\\ufe0e\\ufe0f",qc="\\u200d",Bc=RegExp("["+qc+Cc+Dc+Hc+"]");function ii(t){return Bc.test(t)}function Xc(t){return t.split("")}var oi="\\ud800-\\udfff",Gc="\\u0300-\\u036f",Uc="\\ufe20-\\ufe2f",Yc="\\u20d0-\\u20ff",Kc=Gc+Uc+Yc,Vc="\\ufe0e\\ufe0f",Zc="["+oi+"]",be="["+Kc+"]",xe="\\ud83c[\\udffb-\\udfff]",Wc="(?:"+be+"|"+xe+")",ai="[^"+oi+"]",si="(?:\\ud83c[\\udde6-\\uddff]){2}",ui="[\\ud800-\\udbff][\\udc00-\\udfff]",Jc="\\u200d",li=Wc+"?",fi="["+Vc+"]?",Qc="(?:"+Jc+"(?:"+[ai,si,ui].join("|")+")"+fi+li+")*",jc=fi+li+Qc,th="(?:"+[ai+be+"?",be,si,ui,Zc].join("|")+")",nh=RegExp(xe+"(?="+xe+")|"+th+jc,"g");function eh(t){return t.match(nh)||[]}function rh(t){return ii(t)?eh(t):Xc(t)}function ih(t){return function(n){n=Sn(n);var e=ii(n)?rh(n):void 0,r=e?e[0]:n.charAt(0),i=e?kc(e,1).join(""):n.slice(1);return r[t]()+i}}var oh=ih("toUpperCase");function ah(t){return oh(Sn(t).toLowerCase())}function sh(){this.__data__=new Q,this.size=0}function uh(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function lh(t){return this.__data__.get(t)}function fh(t){return this.__data__.has(t)}var ch=200;function hh(t,n){var e=this.__data__;if(e instanceof Q){var r=e.__data__;if(!Yt||r.length<ch-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new j(r)}return e.set(t,n),this.size=e.size,this}function tt(t){var n=this.__data__=new Q(t);this.size=n.size}tt.prototype.clear=sh,tt.prototype.delete=uh,tt.prototype.get=lh,tt.prototype.has=fh,tt.prototype.set=hh;function dh(t,n){for(var e=-1,r=t==null?0:t.length,i=0,o=[];++e<r;){var a=t[e];n(a,e,t)&&(o[i++]=a)}return o}function ci(){return[]}var ph=Object.prototype,gh=ph.propertyIsEnumerable,hi=Object.getOwnPropertySymbols,di=hi?function(t){return t==null?[]:(t=Object(t),dh(hi(t),function(n){return gh.call(t,n)}))}:ci,yh=Object.getOwnPropertySymbols,_h=yh?function(t){for(var n=[];t;)we(n,di(t)),t=Oc(t);return n}:ci;function pi(t,n,e){var r=n(t);return C(t)?r:we(r,e(t))}function gi(t){return pi(t,$n,di)}function mh(t){return pi(t,Zf,_h)}var Me=pt(W,"DataView"),$e=pt(W,"Promise"),Ae=pt(W,"Set"),yi="[object Map]",vh="[object Object]",_i="[object Promise]",mi="[object Set]",vi="[object WeakMap]",wi="[object DataView]",wh=dt(Me),bh=dt(Yt),xh=dt($e),Mh=dt(Ae),$h=dt(he),nt=Tt;(Me&&nt(new Me(new ArrayBuffer(1)))!=wi||Yt&&nt(new Yt)!=yi||$e&&nt($e.resolve())!=_i||Ae&&nt(new Ae)!=mi||he&&nt(new he)!=vi)&&(nt=function(t){var n=Tt(t),e=n==vh?t.constructor:void 0,r=e?dt(e):"";if(r)switch(r){case wh:return wi;case bh:return yi;case xh:return _i;case Mh:return mi;case $h:return vi}return n});var bi=W.Uint8Array,Ah="__lodash_hash_undefined__";function Th(t){return this.__data__.set(t,Ah),this}function Sh(t){return this.__data__.has(t)}function En(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new j;++n<e;)this.add(t[n])}En.prototype.add=En.prototype.push=Th,En.prototype.has=Sh;function Ph(t,n){for(var e=-1,r=t==null?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function Eh(t,n){return t.has(n)}var zh=1,Nh=2;function xi(t,n,e,r,i,o){var a=e&zh,s=t.length,u=n.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),f=o.get(n);if(l&&f)return l==n&&f==t;var c=-1,h=!0,g=e&Nh?new En:void 0;for(o.set(t,n),o.set(n,t);++c<s;){var d=t[c],p=n[c];if(r)var b=a?r(p,d,c,n,t,o):r(d,p,c,t,n,o);if(b!==void 0){if(b)continue;h=!1;break}if(g){if(!Ph(n,function(_,M){if(!Eh(g,M)&&(d===_||i(d,_,e,r,o)))return g.push(M)})){h=!1;break}}else if(!(d===p||i(d,p,e,r,o))){h=!1;break}}return o.delete(t),o.delete(n),h}function Mi(t){var n=-1,e=Array(t.size);return t.forEach(function(r,i){e[++n]=[i,r]}),e}function Oh(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}var Ih=1,kh=2,Ch="[object Boolean]",Rh="[object Date]",Fh="[object Error]",Lh="[object Map]",Dh="[object Number]",Hh="[object RegExp]",qh="[object Set]",Bh="[object String]",Xh="[object Symbol]",Gh="[object ArrayBuffer]",Uh="[object DataView]",$i=U?U.prototype:void 0,Te=$i?$i.valueOf:void 0;function Yh(t,n,e,r,i,o,a){switch(e){case Uh:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Gh:return!(t.byteLength!=n.byteLength||!o(new bi(t),new bi(n)));case Ch:case Rh:case Dh:return Mn(+t,+n);case Fh:return t.name==n.name&&t.message==n.message;case Hh:case Bh:return t==n+"";case Lh:var s=Mi;case qh:var u=r&Ih;if(s||(s=Oh),t.size!=n.size&&!u)return!1;var l=a.get(t);if(l)return l==n;r|=kh,a.set(t,n);var f=xi(s(t),s(n),r,i,o,a);return a.delete(t),f;case Xh:if(Te)return Te.call(t)==Te.call(n)}return!1}var Kh=1,Vh=Object.prototype,Zh=Vh.hasOwnProperty;function Wh(t,n,e,r,i,o){var a=e&Kh,s=gi(t),u=s.length,l=gi(n),f=l.length;if(u!=f&&!a)return!1;for(var c=u;c--;){var h=s[c];if(!(a?h in n:Zh.call(n,h)))return!1}var g=o.get(t),d=o.get(n);if(g&&d)return g==n&&d==t;var p=!0;o.set(t,n),o.set(n,t);for(var b=a;++c<u;){h=s[c];var _=t[h],M=n[h];if(r)var $=a?r(M,_,h,n,t,o):r(_,M,h,t,n,o);if(!($===void 0?_===M||i(_,M,e,r,o):$)){p=!1;break}b||(b=h=="constructor")}if(p&&!b){var y=t.constructor,v=n.constructor;y!=v&&"constructor"in t&&"constructor"in n&&!(typeof y=="function"&&y instanceof y&&typeof v=="function"&&v instanceof v)&&(p=!1)}return o.delete(t),o.delete(n),p}var Jh=1,Ai="[object Arguments]",Ti="[object Array]",zn="[object Object]",Qh=Object.prototype,Si=Qh.hasOwnProperty;function jh(t,n,e,r,i,o){var a=C(t),s=C(n),u=a?Ti:nt(t),l=s?Ti:nt(n);u=u==Ai?zn:u,l=l==Ai?zn:l;var f=u==zn,c=l==zn,h=u==l;if(h&&ge(t)){if(!ge(n))return!1;a=!0,f=!1}if(h&&!f)return o||(o=new tt),a||ti(t)?xi(t,n,e,r,i,o):Yh(t,n,u,e,r,i,o);if(!(e&Jh)){var g=f&&Si.call(t,"__wrapped__"),d=c&&Si.call(n,"__wrapped__");if(g||d){var p=g?t.value():t,b=d?n.value():n;return o||(o=new tt),i(p,b,e,r,o)}}return h?(o||(o=new tt),Wh(t,n,e,r,i,o)):!1}function Se(t,n,e,r,i){return t===n?!0:t==null||n==null||!St(t)&&!St(n)?t!==t&&n!==n:jh(t,n,e,r,Se,i)}var td=1,nd=2;function ed(t,n,e,r){var i=e.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var a=e[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=e[i];var s=a[0],u=t[s],l=a[1];if(a[2]){if(u===void 0&&!(s in t))return!1}else{var f=new tt,c;if(!(c===void 0?Se(l,u,td|nd,r,f):c))return!1}}return!0}function Pi(t){return t===t&&!J(t)}function rd(t){for(var n=$n(t),e=n.length;e--;){var r=n[e],i=t[r];n[e]=[r,i,Pi(i)]}return n}function Ei(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==void 0||t in Object(e))}}function id(t){var n=rd(t);return n.length==1&&n[0][2]?Ei(n[0][0],n[0][1]):function(e){return e===t||ed(e,t,n)}}function od(t,n){return t!=null&&n in Object(t)}function zi(t,n,e){n=Pn(n,t);for(var r=-1,i=n.length,o=!1;++r<i;){var a=Kt(n[r]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&de(i)&&xn(a,i)&&(C(t)||pe(t)))}function ad(t,n){return t!=null&&zi(t,n,od)}var sd=1,ud=2;function ld(t,n){return _e(t)&&Pi(n)?Ei(Kt(t),n):function(e){var r=Pc(e,t);return r===void 0&&r===n?ad(e,t):Se(n,r,sd|ud)}}function fd(t){return function(n){return n==null?void 0:n[t]}}function cd(t){return function(n){return ve(n,t)}}function hd(t){return _e(t)?fd(Kt(t)):cd(t)}function Ni(t){return typeof t=="function"?t:t==null?fe:typeof t=="object"?C(t)?ld(t[0],t[1]):id(t):hd(t)}function dd(t){return function(n,e,r){for(var i=-1,o=Object(n),a=r(n),s=a.length;s--;){var u=a[++i];if(e(o[u],u,o)===!1)break}return n}}var pd=dd();function gd(t,n){return t&&pd(t,n,$n)}function yd(t,n){return function(e,r){if(e==null)return e;if(!Xt(e))return t(e,r);for(var i=e.length,o=-1,a=Object(e);++o<i&&r(a[o],o,a)!==!1;);return e}}var Oi=yd(gd);function _d(t){return typeof t=="function"?t:fe}function Vt(t,n){var e=C(t)?Vl:Oi;return e(t,_d(n))}function md(t,n){return bn(n,function(e){return[e,t[e]]})}function vd(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=[r,r]}),e}var wd="[object Map]",bd="[object Set]";function xd(t){return function(n){var e=nt(n);return e==wd?Mi(n):e==bd?vd(n):md(n,t(n))}}var Ii=xd($n);function Md(t,n){var e=-1,r=Xt(t)?Array(t.length):[];return Oi(t,function(i,o,a){r[++e]=n(i,o,a)}),r}function Pt(t,n){var e=C(t)?bn:Md;return e(t,Ni(n))}var $d=Object.prototype,Ad=$d.hasOwnProperty;function Td(t,n){return t!=null&&Ad.call(t,n)}function ki(t,n){return t!=null&&zi(t,n,Td)}function Sd(t,n){return t<n}function Pd(t,n,e){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=n(o);if(a!=null&&(s===void 0?a===a&&!Bt(a):e(a,s)))var s=a,u=o}return u}function Ed(t){return t&&t.length?Pd(t,fe,Sd):void 0}function zd(t,n,e,r){if(!J(t))return t;n=Pn(n,t);for(var i=-1,o=n.length,a=o-1,s=t;s!=null&&++i<o;){var u=Kt(n[i]),l=e;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=a){var f=s[u];l=void 0,l===void 0&&(l=J(f)?f:xn(n[i+1])?[]:{})}tf(s,u,l),s=s[u]}return t}function Nd(t,n,e){for(var r=-1,i=n.length,o={};++r<i;){var a=n[r],s=ve(t,a);e(s,a)&&zd(o,Pn(a,t),s)}return o}function Ci(t,n){if(t==null)return{};var e=bn(mh(t),function(r){return[r]});return n=Ni(n),Nd(t,e,function(r,i){return n(r,i[0])})}var Od=Math.ceil,Id=Math.max;function kd(t,n,e,r){for(var i=-1,o=Id(Od((n-t)/(e||1)),0),a=Array(o);o--;)a[++i]=t,t+=e;return a}function Cd(t){return function(n,e,r){return r&&typeof r!="number"&&ef(n,e,r)&&(e=r=void 0),n=le(n),e===void 0?(e=n,n=0):e=le(e),r=r===void 0?n<e?1:-1:le(r),kd(n,e,r)}}var Nn=Cd();function Rd(){var t=arguments,n=Sn(t[0]);return t.length<3?n:n.replace(t[1],t[2])}const Fd=(t,n,e=12,r=12)=>{const i=G().domain([0,e]).range([0,t]),o=G().domain([0,r]).range([0,n]);return{points:function(){return Nn((e+1)*(r+1)).map(function(u){return{m:u%(e+1),n:Math.floor(u/(e+1)),x:i(u%(e+1)),y:o(Math.floor(u/(e+1)))}})},position:function(u,l){typeof u=="number"&&(u=[u]),typeof l=="number"&&(l=[l]);const f=Nc(Pt(l,function(c){return Pt(u,function(h){return{x:i(h),y:o(c)}})}));return f.length==1?f[0]:f}}},m={widget:"_widget_18g36_1",label:"_label_18g36_19",lit:"_lit_18g36_24",button:"_button_18g36_29",symbol:"_symbol_18g36_29",radio:"_radio_18g36_29",radiobutton:"_radiobutton_18g36_29",selected:"_selected_18g36_35",toggle:"_toggle_18g36_35",slider:"_slider_18g36_44",track:"_track_18g36_44",track_overlay:"_track_overlay_18g36_48",handle:"_handle_18g36_55"},Pe=()=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890",e=n.length;let r="";for(let i=0;i<10;++i)r+=n[Math.floor(Math.random()*e)];return r},Ee=(t,n,e)=>{var r,i,o,a;switch(e){case"top":r=0,i=-n/2-5,o="middle",a="bottom";break;case"bottom":r=0,i=n/2+5,o="middle",a="hanging";break;case"left":r=-t/2-5,i=0,o="end",a="middle";break;case"right":r=t/2+5,i=0,o="start",a="middle";break;default:r=0,i=n/2+5,o="middle",a="hanging"}return{x:r,y:i,anchor:o,valign:a}},Ld=(t=1)=>{const n=H();return n.moveTo(t*1,t*0),n.lineTo(t*-.5,t*(Math.sqrt(3)/2)),n.lineTo(t*-.5,t*(-Math.sqrt(3)/2)),n.closePath(),n.toString()},Dd=(t=1)=>{const n=H(),e=.7;return n.moveTo(e*t*(1+.75),e*t*0),n.lineTo(e*t*(-.5+.75),e*t*(Math.sqrt(3)/2)),n.lineTo(e*t*(-.5+.75),e*t*(-Math.sqrt(3)/2)),n.closePath(),n.moveTo(e*t*(1-.75),e*t*0),n.lineTo(e*t*(-.5-.75),e*t*(Math.sqrt(3)/2)),n.lineTo(e*t*(-.5-.75),e*t*(-Math.sqrt(3)/2)),n.closePath(),n.toString()},Hd=(t=1)=>{const n=H();return n.moveTo(-t*1,t*0),n.lineTo(t*.5,t*(Math.sqrt(3)/2)),n.lineTo(t*.5,t*(-Math.sqrt(3)/2)),n.closePath(),n.toString()},qd=(t=1)=>{const n=.3333333333333333,e=.9;var r=H();return r.moveTo(t*e,t*e),r.lineTo(t*e,t*-.9),r.lineTo(t*(e*n),t*-.9),r.lineTo(t*(e*n),t*e),r.closePath(),r.moveTo(-t*e,t*e),r.lineTo(-t*e,t*-.9),r.lineTo(-t*(e*n),t*-.9),r.lineTo(-t*(e*n),t*e),r.closePath(),r.toString()},Bd=(t=1)=>{const n=H(),e=Math.PI/2.5,r=e/2,i=2*Math.PI-e/2,o=.5,a=.6,s=.6,u=[t*(1-o/2)*Math.cos(i),t*(1-o/2)*Math.sin(i)],l=[t*s*Math.cos(i+Math.PI/2),t*s*Math.sin(i+Math.PI/2)];return n.moveTo(t*Math.cos(i),t*Math.sin(i)),n.arc(0,0,t,i,r,!0),n.lineTo(t*(1-o)*Math.cos(r),t*(1-o)*Math.sin(r)),n.arc(0,0,t*(1-o),r,i,!1),n.lineTo(t*(1-a-o/2)*Math.cos(i),t*(1-a-o/2)*Math.sin(i)),n.lineTo(u[0]+l[0],u[1]+l[1]),n.lineTo(t*(1+a-o/2)*Math.cos(i),t*(1+a-o/2)*Math.sin(i)),n.closePath(),n.toString()},Xd=(t=1)=>{const n=H(),e=Math.PI/10,r=t/2,i=Math.PI-e,o=e,a=-e,s=Math.PI+e;return n.arc(0,0,r,s,a),n.lineTo(t,r*Math.sin(s)),n.lineTo(t,-t),n.lineTo(-t,-t),n.lineTo(-t,r*Math.sin(s)),n.closePath(),n.arc(0,0,r,o,i),n.lineTo(-t,r*Math.sin(i)),n.lineTo(-t,t),n.lineTo(t,t),n.lineTo(t,r*Math.sin(i)),n.closePath(),n.toString()},Gd=(t=1)=>{const n=H(),e=Math.PI/2.5,r=e/2+Math.PI,i=2*Math.PI-e/2+Math.PI,o=.5,a=.6,s=-.6;n.moveTo(t*Math.cos(r),t*Math.sin(r)),n.arc(0,0,t,r,i,!1),n.lineTo(t*(1-o)*Math.cos(i),t*(1-o)*Math.sin(i)),n.arc(0,0,t*(1-o),i,r,!0),n.lineTo(t*(1-a-o/2)*Math.cos(r),t*(1-a-o/2)*Math.sin(r));var u=[t*(1-o/2)*Math.cos(r),t*(1-o/2)*Math.sin(r)],l=[t*s*Math.cos(r+Math.PI/2),t*s*Math.sin(r+Math.PI/2)];return n.lineTo(u[0]+l[0],u[1]+l[1]),n.lineTo(t*(1+a-o/2)*Math.cos(r),t*(1+a-o/2)*Math.sin(r)),n.closePath(),n.toString()},Ud=(t=1)=>{var n=H(),e=.9;return n.moveTo(t*e,t*e),n.lineTo(t*-.9,t*e),n.lineTo(t*-.9,t*-.9),n.lineTo(t*e,t*-.9),n.closePath(),n.toString()},Yd=(t=1)=>{const n=H(),e=0,r=2*Math.PI;return n.moveTo(t*Math.cos(e),t*Math.sin(e)),n.arc(0,0,t,e,r,!0),n.closePath(),n.toString()},ze=t=>{switch(t){case"play":return Ld;case"forward":return Dd;case"back":return Hd;case"pause":return qd;case"reload":return Bd;case"capture":return Xd;case"rewind":return Gd;case"stop":return Ud;case"push":return Yd}},Ne=()=>{const t="button";var n=Pe(),e=50,r=.3,i="round",o={x:0,y:0},a=null,s="bottom",u=null,l=function(d){},f=["play"],c=0;return{type:t,id:function(d){return typeof d>"u"?n:(n=d,this)},size:function(d){return typeof d>"u"?e:(e=d,this)},symbolsize:function(d){return typeof d>"u"?r:(r=d,this)},shape:function(d){return typeof d>"u"?i:(i=d,this)},position:function(d){return typeof d>"u"?o:(o=d,this)},x:function(d){return typeof d>"u"?o.x:(o.x=d,this)},y:function(d){return typeof d>"u"?o.y:(o.y=d,this)},label:function(d){return typeof d>"u"?a:(a=d,this)},labelposition:function(d){return typeof d>"u"?s:(s=d,this)},fontsize:function(d){return typeof d>"u"?u:(u=d,this)},update:function(d){if(typeof d=="function")return l=d,this;l(d)},actions:function(d){return typeof d>"u"?f:(f=d,this)},value:function(d){return typeof d>"u"?c:(c=d,this)},click:function(){c=(c+1)%f.length,l(),T(this.parentNode).select("."+m.symbol).attr("d",ze(f[c])(r*e))},press:function(d){c=(c+1)%f.length,l(),d.select("#button_"+n).select("."+m.symbol).attr("d",ze(f[c])(r*e))}}},Kd=()=>{const t="slider",n=wn(".3f");var e=Pe(),r=100,i=8,o=10,a=!1,s={x:0,y:0},u="top-left",l=null,f=function(_){},c=function(_){},h=[0,1],g=0,d=null,p=G().domain(h).range([0,r]).clamp(!0);const b=function(_,M,$=h){const y=_.select("#slider_"+e);p.domain($),g=M,y.selectAll("."+m.handle).transition().attr("cx",p(M)),a&&y.select("."+m.label).text(d+" = "+n(g)),f(),c()};return{type:t,scale:p,id:function(_){return typeof _>"u"?e:(e=_,this)},label:function(_){return typeof _>"u"?d:(d=_,this)},size:function(_){return typeof _>"u"?r:(r=_,this)},girth:function(_){return typeof _>"u"?i:(i=_,this)},knob:function(_){return typeof _>"u"?o:(o=_,this)},show:function(_){return typeof _>"u"?a:(a=_,this)},position:function(_){return typeof _>"u"?s:(s=_,this)},x:function(_){return typeof _>"u"?s.x:(s.x=_,this)},y:function(_){return typeof _>"u"?s.y:(s.y=_,this)},labelposition:function(_){return typeof _>"u"?u:(u=_,this)},fontsize:function(_){return typeof _>"u"?l:(l=_,this)},update:function(_){if(typeof _=="function")return f=_,this;f(_)},update_end:function(_){if(typeof _=="function")return c=_,this;c(_)},range:function(_){return typeof _>"u"?h:(h=_,this)},value:function(_){return typeof _>"u"?g:(g=_,this)},reset:b,click:b}},Vd=()=>{const t="radio";var n=Pe(),e=100,r=20,i=.3,o="round",a="vertical",s={x:0,y:0},u="right",l=null,f=function(p){},c=[],h=0;return{type:t,id:function(p){return typeof p>"u"?n:(n=p,this)},size:function(p){return typeof p>"u"?e:(e=p,this)},buttonsize:function(p){return typeof p>"u"?r:(r=p,this)},buttonpadding:function(p){return typeof p>"u"?i:(i=p,this)},orientation:function(p){return typeof p>"u"?a:(a=p,this)},shape:function(p){return typeof p>"u"?o:(o=p,this)},position:function(p){return typeof p>"u"?s:(s=p,this)},x:function(p){return typeof p>"u"?s.x:(s.x=p,this)},y:function(p){return typeof p>"u"?s.y:(s.y=p,this)},labelposition:function(p){return typeof p>"u"?u:(u=p,this)},fontsize:function(p){return typeof p>"u"?l:(l=p,this)},update:function(p){if(typeof p=="function")return f=p,this;f(p)},choices:function(p){return typeof p>"u"?c:(c=p,this)},value:function(p){return typeof p>"u"?h:(h=p,this)},click:function(p,b){h=b,T(this.parentNode).selectAll("."+m.symbol).classed(m.selected,_=>_==h),f()},reset:function(p,b){h=b,p.select("#radio_"+n).selectAll("."+m.symbol).classed(m.selected,_=>_==h),f()}}},Zd=(t,n)=>{const e="button_"+t.id(),r=t.label(),i=t.labelposition(),o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=T(o).attr("class",m.widget+" "+m.button).attr("id",e).attr("transform","translate("+t.x()+","+t.y()+")");var s;if(t.shape()=="rect"?s=a.append("rect").attr("width",t.size()).attr("height",t.size()).attr("transform","translate("+-t.size()/2+","+-t.size()/2+")").attr("rx",5).attr("ry",5):s=a.append("circle").attr("r",t.size()/2),s.attr("class",m.background).on("click",t.click).on("mouseover",function(){T(this).classed(m.lit,!0),T(this.parentNode).select("."+m.symbol).classed(m.lit,!0)}).on("mouseout",function(){T(this).classed(m.lit,!1),T(this.parentNode).select("."+m.symbol).classed(m.lit,!1)}),a.append("path").attr("d",ze(t.actions()[t.value()])(t.symbolsize()*t.size())).attr("class",m.symbol),r){const u=Ee(t.size(),t.size(),i);a.append("text").text(r).attr("class",m.label).style("text-anchor",u.anchor).style("font-size",t.fontsize()).style("alignment-baseline",u.valign).attr("transform","translate("+u.x+","+u.y+")")}return o},Ri=(t,n)=>{const e=H();return e.moveTo(0,n/2),e.arc(0,0,n/2,Math.PI/2,3*Math.PI/2,!1),e.lineTo(t,-n/2),e.arc(t,0,n/2,3*Math.PI/2,2*Math.PI+Math.PI/2,!1),e.closePath(),e.toString()},Wd=(t,n)=>{const e=wn(".3f"),r="slider_"+t.id();t.labelposition();const i=t.range,o=t.size();t.label();const a=t.scale;var s;const u=document.createElementNS("http://www.w3.org/2000/svg","g");s=T(u).attr("class",m.widget+" "+m.slider).attr("id",r).attr("transform","translate("+t.x()+","+t.y()+")"),a.domain(i()).range([0,o]).clamp(!0);const l=t.knob()>t.girth()?t.knob():t.girth()/2;s.append("path").attr("d",Ri(t.size(),t.girth())).attr("class",m.track),s.append("circle").attr("class",m.handle).attr("r",t.knob()).attr("cx",a(t.value())),s.append("rect").attr("width",t.size()+2*l).attr("height",2*l).attr("transform","translate("+-l+","+-l+")").attr("class",m.track_overlay).on("click",function(d){const p=Bn(d,this)[0];t.value(a.invert(p)),t.update(),t.update_end(),s.selectAll("."+m.handle).attr("cx",a(t.value())),t.show()&&s.select("."+m.label).text(t.label()+" = "+e(t.value()))}).call(Va().on("drag",function(d){t.value(a.invert(d.x)),t.update(),s.selectAll("."+m.handle).attr("cx",a(t.value())),t.show()&&s.select("."+m.label).text(t.label()+" = "+e(t.value()))}).on("end",function(d){t.update_end()}));var f,c,h,g="bottom";return t.fontsize&&(c=t.labelposition().match(/bottom/i)!=null?Qt([t.girth()/2,t.knob()])+t.fontsize()/2:-Qt([t.girth()/2,t.knob()])-t.fontsize()/2),c=t.labelposition().match(/bottom/i)!=null?Qt([t.girth()/2,t.knob()])+7:-Qt([t.girth()/2,t.knob()])-7,f=t.labelposition().match(/right/i)!=null?t.size():t.labelposition().match(/center/i)!=null?t.size()/2:0,h=t.labelposition().match(/right/i)!=null?"end":t.labelposition().match(/center/i)!=null?"middle":"start",g=t.labelposition().match(/bottom/i)!=null?"hanging":"top",s.append("text").text(t.show()?t.label()+" = "+e(t.value()):t.label()).attr("class",m.label).style("text-anchor",h).style("alignment-baseline",g).style("font-size",t.fontsize()).style("opacity",1).attr("transform","translate("+f+","+c+")"),u},Jd=(t,n)=>{const e="toggle_"+t.id(),r=t.size(),i=t.label(),o=t.labelposition(),a=document.createElementNS("http://www.w3.org/2000/svg","g"),s=T(a).attr("class",m.widget+" "+m.toggle).attr("id",e).attr("transform","translate("+(t.x()-r)+","+t.y()+")").classed(m.selected,t.value()==1);if(s.append("path").attr("d",Ri(2*t.size(),2*t.size())).attr("class",m.track),s.append("circle").attr("class",m.handle).attr("r",r).attr("cx",t.value()?2*r:0),s.append("rect").attr("width",4*t.size()).attr("height",2*t.size()).attr("class",m.track_overlay).attr("transform","translate("+-t.size()+","+-t.size()+")").on("click",t.click),i){const u=Ee(4*t.size(),2*t.size(),o);s.append("text").text(i).attr("class",m.label).style("text-anchor",u.anchor).style("font-size",t.fontsize()).style("alignment-baseline",u.valign).attr("transform","translate("+(u.x+r)+","+u.y+")")}return a},Qd=(t,n)=>{const e="radio_"+t.id(),r=t.labelposition(),i=t.buttonsize(),o=t.buttonsize()*(1-t.buttonpadding()),a=t.choices().length,s=ro(a),u=G().domain([0,a-1]).range([0,t.size()]),l=G().domain([0,a-1]).range([0,t.size()]),f=document.createElementNS("http://www.w3.org/2000/svg","g"),h=T(f).attr("class",m.widget+" "+m.radio).attr("id",e).attr("transform","translate("+t.x()+","+t.y()+")").selectAll("."+m.radiobutton).data(s).enter().append("g").attr("class",m.radiobutton).attr("id",b=>"b"+b).attr("transform",b=>t.orientation()=="vertical"?"translate(0,"+l(b)+")":"translate("+u(b)+",0)");var g,d;t.shape()=="rect"?(g=h.append("rect").attr("width",i).attr("height",i).attr("rx",2).attr("ry",2).attr("transform","translate("+-i/2+","+-i/2+")"),d=h.append("rect").attr("width",o).attr("height",o).attr("rx",2).attr("ry",2).attr("transform","translate("+-o/2+","+-o/2+")")):(g=h.append("circle").attr("r",i/2),d=h.append("circle").attr("r",o/2)),g.attr("class",m.background).on("mouseover",function(){T(this).classed(m.lit,!0),T(this.parentNode).select("."+m.symbol).classed(m.lit,!0)}).on("mouseout",function(){T(this).classed(m.lit,!1),T(this.parentNode).select("."+m.symbol).classed(m.lit,!1)}),d.attr("class",m.symbol),d.filter(b=>b==t.value()).classed(m.selected,!0),h.on("click",t.click);const p=Ee(t.buttonsize(),t.buttonsize(),r);return h.append("text").attr("class",m.label).text(function(b,_){return t.choices()[_]}).attr("alignment-baseline",p.valign).attr("transform","translate("+p.x+","+p.y+")").style("font-size",t.fontsize()).attr("text-anchor",p.anchor),f},Oe=(t,n)=>{switch(t.type){case"button":return Zd(t);case"slider":return Wd(t);case"radio":return Qd(t);case"toggle":return Jd(t)}},jd=(t,n)=>{const e=Fd(n.controls_size.width,n.controls_size.height,n.controls_grid.nx,n.controls_grid.ny),r=T("#"+t).classed(n.id+" "+n.container_class,!0),i=r.append("div").attr("id","display").attr("class","display-panel").classed(n.display_class,!0).classed(n.debug_lattice,n.debug).append(n.display_type).attr("width",n.display_type=="canvas"?n.display_size.width:null).attr("height",n.display_type=="canvas"?n.display_size.height:null).attr("viewBox",n.display_type=="canvas"?null:"0 0 "+n.display_size.width+" "+n.display_size.height).style("width","100%"),o=r.append("div").attr("id","controls").attr("class","control-panel").classed(n.controls_class,!0).classed(n.debug_lattice,n.debug).append("svg").attr("viewBox","0 0 "+n.controls_size.width+" "+n.controls_size.height).style("width","100%").style("height","100%");return typeof n.controls_border=="string"&&n.controls_border.length>0&&o.style("border",n.controls_border),typeof n.display_border=="string"&&n.display_border.length>0&&i.style("border",n.display_border),n.debug&&o.selectAll(null).data(e.points).enter().append("circle").attr("r",2).attr("transform",a=>"translate("+a.x+","+a.y+")").style("fill","black"),{display:i,controls:o,grid:e}},A={widgets:{slider_size:400,slider_gap:1.5,slider_anchor:{x:1,y:9},slider_girth:12,slider_knob:14,playbutton_size:120,playbutton_anchor:{x:3,y:2},backbutton_anchor:{x:4,y:5},resetbutton_anchor:{x:2,y:5},radio:{input_space:{anchor:{x:9,y:1},size:150,orientation:"vertical",label_position:"right",shape:"circle",buttonsize:30},geometry:{anchor:{x:1.5,y:7},size:300,orientation:"horizontal",label_position:"right",shape:"rect",buttonsize:30}}},simulation:{delay:10,neuron_size:5}},z={dt:1,L:100,agentsize:1,response_magnitude:{range:[0,.3],default:.1},lateral_interaction:{range:[.5,20],default:6},input_space:{choices:["circle","triangle","square","cross"],default:0},geometry:{choices:["256 x 1","64 x 4","16 x 16"],dimensions:[{nx:256,ny:1},{nx:64,ny:4},{nx:16,ny:16}],default:2}},Fi=t=>Pt(Ii(t),n=>{n[1].id=n[0],n[1].label=Rd(ah(n[0]),/_/g," ")}),Li=t=>Pt(Ii(t),n=>n[1]),Di=(t,n)=>Vt(t,(e,r)=>e.widget=n[r]),tp=t=>Ci(t,n=>ki(n,"range")),np=t=>Ci(t,n=>ki(n,"choices"));G().domain([0,360]).range([0,2*Math.PI]),G().range([0,360]).domain([0,2*Math.PI]);const Hi=(t,n)=>{const e=t.x-n.x,r=t.y-n.y;return Math.sqrt(e*e+r*r)},qi=(t,n)=>{const e=t.x,r=t.y;let i=!1;for(var o=0,a=n.length-1;o<n.length;a=o++){var s=n[o].x,u=n[o].y,l=n[a].x,f=n[a].y,c=u>r!=f>r&&e<(l-s)*(r-u)/(f-u)+s;c&&(i=!i)}return i},Ie=tp(z),Bi=np(z);Fi(Ie),Fi(Bi);const Xi=Li(Ie),Gi=Li(Bi),On=Pt(Xi,t=>Kd().id(t.id).label(t.label).range(t.range).value(t.default).size(A.widgets.slider_size).knob(A.widgets.slider_knob).girth(A.widgets.slider_girth)),ke=Pt(Gi,t=>Vd().choices(t.choices).id(t.id).value(t.default).orientation(A.widgets.radio[t.id].orientation).labelposition(A.widgets.radio[t.id].label_position).size(A.widgets.radio[t.id].size).shape(A.widgets.radio[t.id].shape).buttonsize(A.widgets.radio[t.id].buttonsize));Di(Xi,On),Di(Gi,ke);const at=Ne().actions(["play","pause"]),In=Ne().actions(["back"]),kn=Ne().actions(["rewind"]),ep=[at,In,kn],rp=(t,n)=>{const e=n.position(A.widgets.slider_anchor.x,Nn(On.length).map(r=>A.widgets.slider_anchor.y+A.widgets.slider_gap*r));Vt(ke,r=>{const i=n.position(A.widgets.radio[r.id()].anchor.x,A.widgets.radio[r.id()].anchor.y);r.position(i)}),On.forEach((r,i)=>r.position(e[i])),at.position(n.position(A.widgets.playbutton_anchor.x,A.widgets.playbutton_anchor.y)).size(A.widgets.playbutton_size),kn.position(n.position(A.widgets.backbutton_anchor.x,A.widgets.backbutton_anchor.y)),In.position(n.position(A.widgets.resetbutton_anchor.x,A.widgets.resetbutton_anchor.y)),t.selectAll(null).data(On).enter().append(Oe),t.selectAll(null).data(ep).enter().append(Oe),t.selectAll(null).data(ke).enter().append(Oe)},ip=t=>{Vt(Ie,n=>n.widget.reset(t,n.default))},op=(t,n)=>[t%n,Math.floor(t/n)],ap=(t,n,e)=>n*e+t,sp=(t,n,e)=>{const r=[[-1,0],[1,0],[0,-1],[0,1]];let i=[];return r.forEach(function(o){var a=o[0],s=o[1],u=op(t,n),l=u[0],f=u[1],c=l+a,h=f+s;c<n&&h<e&&c>=0&&h>=0&&i.push(ap(c,h,n))}),i},up=(t,n)=>{var e=Nn(t*n).map(function(r){return{m:r%t,n:Math.floor(r/t)}});return e.forEach(function(r,i){r.neighbors=sp(i,t,n).map(function(o){return e[o]})}),e},Ce={circle:Nn(101).map(function(t){return{x:Math.cos(t/100*2*Math.PI),y:Math.sin(t/100*2*Math.PI)}}),triangle:[{x:-1,y:-1},{x:1,y:-1},{x:0,y:1},{x:-1,y:-1}],square:[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1}],cross:[{x:1/3,y:-1/3},{x:1,y:-1/3},{x:1,y:1/3},{x:1/3,y:1/3},{x:1/3,y:1},{x:-1/3,y:1},{x:-1/3,y:1/3},{x:-1,y:1/3},{x:-1,y:-1/3},{x:-1/3,y:-1/3},{x:-1/3,y:-1},{x:1/3,y:-1},{x:1/3,y:-1/3}]};var yt=[],Re=[],et={};const lp=()=>{z.timer={},z.tick=0;const t=z.geometry.dimensions[z.geometry.widget.value()];yt=up(t.nx,t.ny),Re=[],yt.forEach(function(n){n.x=2*Math.random()-1,n.y=2*Math.random()-1,n.neighbors.forEach(function(e){Re.push({source:n,target:e})})})},fp=()=>{z.tick++,et={x:2*Math.random()-1,y:2*Math.random()-1};const t=Ce[z.input_space.choices[z.input_space.widget.value()]],n=z.response_magnitude.widget.value(),e=z.lateral_interaction.widget.value();if(qi(et,t)){Vt(yt,o=>o.state="clear");let r=yt.map(o=>Hi(o,et)),i=yt[r.indexOf(Ed(r))];i.state="winner",Vt(yt,o=>{const a=n*Math.exp(-((o.n-i.n)*(o.n-i.n)+(o.m-i.m)*(o.m-i.m))/e**2);let s=Hi(et,o);var u=(et.x-o.x)/s,l=(et.y-o.y)/s;o.x+=a*u,o.y+=a*l})}},Zt={neuron:"_neuron_1czyw_1",synapse:"_synapse_1czyw_7",boundary:"_boundary_1czyw_13"},rt=G().domain([-1,1]),it=G().domain([-1,1]);var cp=fl().x(t=>rt(t.x)).y(t=>it(t.y));const hp=(t,n)=>{const e=n.display_size.width,r=n.display_size.height;rt.range([n.display_margin,e-2*n.display_margin]),it.range([r-2*n.display_margin,n.display_margin]),t.selectAll("#origin").remove();const i=t.append("g").attr("id","origin");i.append("path").datum(Ce[z.input_space.choices[z.input_space.widget.value()]]).attr("d",cp).attr("class",Zt.boundary),i.selectAll(null).data(Re).enter().append("line").attr("class",Zt.synapse).attr("x1",function(o){return rt(o.source.x)}).attr("y1",function(o){return it(o.source.y)}).attr("x2",function(o){return rt(o.target.x)}).attr("y2",function(o){return it(o.target.y)}),i.selectAll(null).data(yt).enter().append("circle").attr("class",Zt.neuron).attr("r",A.simulation.neuron_size).attr("transform",function(o){return"translate("+rt(o.x)+","+it(o.y)+")"})},dp=(t,n)=>{const e=Ce[z.input_space.choices[z.input_space.widget.value()]];qi(et,e)&&(t.select("#origin").append("circle").attr("r",2).style("fill","darkred").attr("transform","translate("+rt(et.x)+","+it(et.y)+")").transition().duration(500).attr("r",10).style("opacity",0).remove(),t.select("#origin").selectAll("."+Zt.neuron).attr("transform",function(r){return"translate("+rt(r.x)+","+it(r.y)+")"}),t.select("#origin").selectAll("."+Zt.synapse).attr("x1",function(r){return rt(r.source.x)}).attr("y1",function(r){return it(r.source.y)}).attr("x2",function(r){return rt(r.target.x)}).attr("y2",function(r){return it(r.target.y)}))};function pp(t,n){fp(),dp(t)}function Cn(t,n){lp(),hp(t,n)}var Ui={};const gp=(t,n)=>{at.value()==1?Ui=Ts(()=>pp(t),A.simulation.delay):Ui.stop()},yp=(t,n,e)=>{kn.update(()=>ip(n)),at.update(()=>gp(t)),In.update(()=>Cn(t,e)),z.input_space.widget.update(()=>Cn(t,e)),z.geometry.widget.update(()=>Cn(t,e))},Yi={name:"@explorables/yo_kohonen",title:"Yo, Kohonen!",subtitle:"Kohonen's Self-Organizing Map",description:"This explorable illustrates the dynamics of a simple neural network model that is able to self-organize a one- or two-dimensional representation of a complicate input space.",author:"Dirk Brockmann (https://synosy.github.io)"};function Ki(t,n=mt){const e=jd(t,n),r=e.display,i=e.controls,o=e.grid;return rp(i,o),yp(r,i,n),Cn(r,n),{halt(){at.value()===1&&at.press(i)},reset(){at.value()===1&&at.press(i),kn.press(i),In.press(i)},config:n,meta:Yi}}E.config=mt,E.default=Ki,E.load=Ki,E.meta=Yi,Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
